#summary First steps
#labels Featured

== Introduction ==

This document contains notes on building, configuring, running and testing the server. 

Target audience: developers with at least basic understanding of Erlang and Comet.

*Important notice for windows users:* install cygwin first or rewrite the Makefile for windows (and *post* it here please)
=== Getting the code === 

Get the code from svn:
{{{ 
svn co http://erlycomet.googlecode.com/svn/trunk erlycomet-read-only
}}}

=== Compiling and configuring the server ===
{{{ 
cd erlycomet-read-only
make 
}}}
=== Running the server === 
{{{ 
make run
}}}
This will start the server on Port 3000 and open the interactive Erlang shell. 
If you want to use a different port, then you have to edit the file `erlycomet.app` in the `ebin` directory. You'll also need to edit the erlycomet/demo-docroot/index.html. For ports < 1024 your Erlang distribution needs to have fd_server package installed.

If you want to experiment with cross domain Comet, you can easily start a second server on Port 3001 (from another terminal):
{{{ 
make runx
}}}

=== Demo ===

Check the server status on the interactive Erlang shell:
{{{
(erlycomet_demo@Macintosh)1> erlycomet_demo:status().
Connections: []
ok
(erlycomet_demo@Macintosh)2>
}}}

Start first client: http://localhost:3000/index.html

Check the server status again, you should see now one connection:
{{{
(erlycomet_demo@Macintosh)2> erlycomet_demo:status().
Connections: [{"3855F37603188BD7D3F703A240174C9",<0.101.0>}]
ok
(erlycomet_demo@Macintosh)3> 
}}}

If you leave the browser window open, the server will disconnect after a timeout of 20 minutes (currently hard-coded).

Start second client: http://localhost:3001/index.html

the second client accesses cross-domain (via callback-polling) the first server. 
Now check on both servers the status again and you should see on both the two connections.
 
{{{
erlycomet_demo:status().
Connections: []
ok
(erlycomet_demo@Macintosh)3> erlycomet_demo:status().
Connections: [{"48C7EC765D1DE3EFE14C38AAEB628C3",<0.102.0>},
              {"3855F37603188BD7D3F703A240174C9",<0.101.0>}]
ok
(erlycomet_demo@Macintosh)4> 
}}}

Now you have a Comet cluster running. Congratulations ! If you want to run the nodes on different hosts, then you need a bit more configuration, but that is beyond the scope of this tutorial.